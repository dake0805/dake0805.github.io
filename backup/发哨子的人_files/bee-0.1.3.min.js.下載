!function(e){var t=e,n=document,r=t.localStorage,i={},a=t.bee,o=2e3;t.bee=null;var s={type:function(e){return null==e?"null":Object.prototype.toString.call(e).slice(8,-1).toLowerCase()||"object"},addListener:function(e,t,n,r){e.addEventListener?e.addEventListener(t,n,r?r:!1):e.attachEvent&&e.attachEvent("on"+t,n)},removeListener:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)},merge:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},loader:function(e,t){if(i[e]&&i[e].loading)return void(i[e].loaded&&"function"===s.type(t)?t(e):i[e].fn.push(t));i[e]=i[e]||{loading:!0,loaded:!1,fn:[]},i[e].fn.push(t);var r=n.createElement("script"),o=n.getElementsByTagName("head")[0]||n.documentElement,u=!1;r.async=!0,r.src=a.base+"/plugins/"+e+".js";var l=r.onerror=r.onload=r.onreadystatechange=function(){if(!(u||this.readyState&&"loaded"!=this.readyState&&"complete"!=this.readyState)){u=!0,r.onerror=r.onload=r.onreadystatechange=null,o.removeChild(r);for(var n=0,a=i[e].fn.length;a>n;n++)"function"===s.type(t)&&i[e].fn[n](e);i[e].loaded=!0}};setTimeout(l,1e4),o.insertBefore(r,o.firstChild)},cleanupURL:function(e){return e?a.strip?e.replace(/\?.*/,"?qs-redacted"):e:""},escape:function(e){return encodeURIComponent(String(e).replace(/(?:\r\n|\r|\n)/g,"<CR>"))},objectToString:function(e){if("object"!==s.type(e))return"";var t=[];for(var n in e)if(e.hasOwnProperty(n))if("array"===s.type(e[n]))for(var r=0,i=e[n].length;i>r;r++)t.push(n+"="+s.escape(e[n][r]));else t.push(n+"="+s.escape(e[n]));return t.join("&")}},a=s.merge({isDebug:!1,base:"",uploadURL:"",strip:!1,evtAttached:!1,vars:{},errors:[],logs:[],timings:[],hasSended:!0,events:{page_ready:[],page_unload:[],before_unload:[],dom_loaded:[],before_beacon:[],onbeacon:[],xhr_load:[],click:[],form_submit:[]},composeUploadAddress:function(){return a.uploadURL+(a.uploadURL.indexOf("?")<0?"?":"&")},sendVarsInStorage:function(){var e=r.getItem("bee");r.removeItem("bee");try{e=e?JSON.parse(e):[]}catch(t){}for(var n=0,i=e.length;i>n;n++)a.sendData(e[n])},setVarsToStorage:function(){a.vars.u=s.cleanupURL(n.URL.replace(/#.*/,"")),a.vars.v=u.version;var e=r.getItem("bee");try{e=e?JSON.parse(e):[]}catch(t){}e.push(a.vars),r.setItem("bee",JSON.stringify(e))},clickHandler:function(e){return function(n){var n=n||t.event,r=n.target||n.srcElement;3===r.nodeType&&(r=r.parentNode),r&&"OBJECT"===r.nodeName.toUpperCase()&&"application/x-shockwave-flash"===r.type||(n.target=r,a.fire(e,n))}},fire:function(e,t){for(var n=a.events[e],r=0,i=n.length;i>r;r++)try{var o=n[r];if(!o||!o.fn)continue;o.fn.call(o.scope,t,o.data)}catch(s){u.addError(s,"fire."+e+"<"+r+">")}return!0},sendData:function(e){function t(e){var t=new Image(1,1);t.onload=t.onerror=t.onabort=function(){t.onload=t.onerror=t.onabort=null,t=null},t.src=e}e.u=e.u||s.cleanupURL(n.URL.replace(/#.*/,"")),e.v=e.v||u.version;var r=a.uploadURL+"u="+e.u+"&v="+e.v,i=o-r.length,l="",f=[];for(var c in e)e.hasOwnProperty(c)&&"u"!==c&&"v"!==c&&(l="",l="array"===s.type(e[c])?"&"+c+"="+s.escape(e[c].join(u.sep)):"&"+c+"="+s.escape(e[c]),f.push(l));f.sort(function(e,t){return e.length>t.length?-1:1}),l="";for(var d=0,m=f.length;m>d;d++){var g=f.pop();l.length+g.length>i&&(l||(l=g,g=""),t(r+l),l=""),l+=g}l&&t(r+l)}},a),u={version:.1,plugins:{},window:e,navigationStart:void 0,site_domain:t.location.hostname.replace(/.*?([\d]+\.[\d]+\.[\d]+\.[\d]+|[^.]+\.[^.]+)\.?$/,"$1").toLowerCase(),sep:"|",init:function(e){if(r){var i={base:1,uploadURL:1,strip:1};for(var l in e)e.hasOwnProperty(l)&&i[l]&&(a[l]=e[l]);if(a.uploadURL){if(u.seer=a.end,u.uploadURL=a.uploadURL=a.composeUploadAddress(),a.leftVarsLen=o-a.uploadURL.length,!a.evtAttached){if(a.pageLoaded<0){var f=function(){u.pageLoaded=u.now(),a.fire("page_ready",u.pageLoaded)};t.onpagehide||null===t.onpagehide?s.addListener(t,"pageshow",f):s.addListener(t,"load",f)}else u.pageLoaded=a.pageLoaded;if(a.domLoaded<0){var c=function(){u.domLoaded=u.now(),a.fire("dom_loaded",u.domLoaded)};s.addListener(t,"DOMContentLoaded",c)}else u.domLoaded=a.domLoaded;var d="ontouchstart"in window||window.navigator.msMaxTouchPoints&&window.navigator.msMaxTouchPoints>0;s.addListener(t,d?"touchstart":"click",a.clickHandler("click"),!0);for(var m=n.getElementsByTagName("form"),g=0,p=m.length;p>g;g++)s.addListener(m[g],"submit",a.clickHandler("form_submit"));t.onpagehide||null===t.onpagehide?s.addListener(t,"pagehide",function(){a.sendData(a.vars)}):s.addListener(t,"unload",function(){a.sendData(a.vars)}),t.onerror=function(e,t,n,r,i){return u.addError({message:e,fileName:t,lineNumber:n||0,columnNumber:r||0,stack:i&&i.stack?i.stack:""},"win.err"),!1},u.addVar("pv","1"),a.evtAttached=!0}for(var v in u.plugins)if(u.plugins.hasOwnProperty(v)&&"function"===s.type(u.plugins[v].init))try{u.plugins[v].init(e[v],a)}catch(h){u.addError(h,v+".init")}var b=t.performance||t.msPerformance||t.webkitPerformance||t.mozPerformance,y=b&&b.timing;if(y&&(u.navigationStart=y.navigationStart||y.fetchStart||void 0,navigator.userAgent.match(/Firefox\/[78]\./)&&(u.navigationStart=y.unloadEventStart||y.fetchStart||void 0),u.navigationStart=u.navigationStart||u.plugins.rt&&u.plugins.rt.cookie_start||a.start,u.timing=function(e,t,n){t=t||Date.now(),n||(t-=u.navigationStart),u.addVar(e,t)},a.timings.length>0)){for(var g=0,w=a.timings.length;w>g;g++){var S=a.timings[g].r?a.timings[g].t:a.timings[g].t-u.navigationStart;u.addVar(a.timings[g].n,S)}a.timings=[]}}}},subscribe:function(e,n,r,i){if(a.events.hasOwnProperty(e)){for(var o=a.events[e],l=0,f=o.length;f>l;l++){var c=o[l];if(c&&c.fn===n&&c.data===r&&c.scope===i)return}switch(o.push({fn:n,data:r||{},scope:i||null}),e){case"page_ready":u.pageLoaded>0&&n.call(i,a.pageLoaded,r);break;case"dom_loaded":u.domLoaded>0&&n.call(i,a.domLoaded,r);break;case"page_unload":case"before_unload":var d=function(e){n&&n.call(i,(e||t.event).type,r)};"page_unload"===e&&(t.onpagehide||null===t.onpagehide?s.addListener(t,"pagehide",d):s.addListener(t,"unload",d)),s.addListener(t,"beforeunload",d)}}},addError:function(e,t){a.errors.push({a:arguments,t:u.fromNow()})},now:function(){try{if("performance"in t&&t.performance&&t.performance.now)return function(){return Math.round(t.performance.now()+t.performance.timing.navigationStart)}}catch(e){}return Date.now||function(){return(new Date).getTime()}}(),fromNow:function(){try{if("performance"in t&&t.performance&&t.performance.now)return Math.round(t.performance.now())}catch(e){}return(Date.now()||(new Date).getTime())-a.start},addVar:function(e,t){function n(e,n,r){e[n]?(e[n]&&"array"!==s.type(e[n])&&(e[n]=[e[n]]),e[n].push(t)):e[n]=r}var r=s.objectToString(a.vars).length+JSON.stringify(arguments).length;if(a.hasSended&&r>a.leftVarsLen&&(a.sendData(a.vars),a.vars={}),"string"==typeof e)n(a.vars,e,t);else if("object"==typeof e)for(var i in e)e.hasOwnProperty(i)&&n(a.vars,i,e[i])},addIncrementVar:function(e,t,n){function r(e,t,r,i){if(e[t]){var a=!1;e[t]&&"array"!==s.type(e[t])&&(e[t]=[e[t]]);for(var o=0,u=e[t].length;u>o;o++){var l=e[t][o].split(",");if(l[0]==r){l[1]++,e[t][o]=r+","+l[1],a=!0;break}}a||e[t].push(r+","+n)}else e[t]=r+","+n}var i=s.objectToString(a.vars).length+JSON.stringify(arguments).length;a.hasSended&&i>a.leftVarsLen&&(a.sendData(a.vars),a.vars={}),"string"==typeof e&&r(a.vars,e,t,n)},removeVar:function(e){if(arguments.length){var t;t=1===arguments.length&&"array"===s.type(e)?e:arguments;for(var n=0,r=arguments.length;r>n;n++)a.vars.hasOwnProperty(t[n])&&delete a.vars[t[n]];return this}},hasVar:function(e){return a.vars.hasOwnProperty(e)},sendBeacon:function(){a.fire("before_beacon",a.vars);for(var e in u.plugins)if(u.plugins.hasOwnProperty(e)&&!u.plugins[e].completed())return!1;a.sendData(a.vars),a.vars={},a.hasSended=!0,a.fire("onbeacon")},log:function(e,t){u.isDebug&&"object"==typeof console&&void 0!==console.log&&console.log(e),a.logs.push({a:arguments,t:u.fromNow()})},debug:function(e){u.isDebug&&"object"==typeof console&&void 0!==console.log&&console.log(e)},info:function(e){u.log(e,"i")},warn:function(e){u.log(e,"w")},error:function(e){u.log(e,"e")},timing:function(e,t){a.timings.push({n:e,t:t||u.now()})}};u.utils=s,t.bee=u}(window),function(e){var t=e.bee,n=document;t.utils.getCookie=function(e){if(!e)return null;e=" "+e+"=";var t=" "+n.cookie+";",r=t.indexOf(e);return r>=0?(r+=e.length,t=t.substring(r,t.indexOf(";",r))):null},t.utils.setCookie=function(e,r,i){if(!e||!t.site_domain)return!1;var a=t.utils.objectToString(r,"&"),o=e+"="+a,s=[o,"path=/","domain="+t.site_domain];if(i){var u=new Date;u.setTime(u.getTime()+1e3*i),u=u.toGMTString(),s.push("expires="+u)}if(o.length<500){n.cookie=s.join("; ");var l=t.utils.getCookie(e);if(a===l)return!0;t.debug("Saved cookie value doesn't match what we tried to set:\n"+a+"\n"+l)}else t.debug("Cookie too long: "+o.length+" "+o);return!1},t.utils.getSubCookies=function(e){if(!e||"string"!=typeof e)return null;for(var t=!1,n={},r=e.split("&"),i=0,a=r.length;a>i;i++){var o=r[i].split("=");o[0]&&(o.push(""),n[decodeURIComponent(o[0])]=decodeURIComponent(o[1]),t=!0)}return t?n:null},t.utils.removeCookie=function(e){return t.utils.setCookie(e,{},-86400)}}(bee.window),function(e){var t=e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||e.oRequestAnimationFrame||function(e){return setTimeout(e,1/60)},n={initialized:!1,complete:!1,t_start:0,t_first:0,calcDuration:1e3,disableDuration:5e3,isCalculating:!1,isDisable:!1,times:0,sum:0,targets:[],addVars:[],pm:e.performance&&e.performance.memory,calcFPS:function(e){if(n.isCalculating)return void(-1===n.targets.indexOf(e)&&n.targets.push(e));if(!n.isDisable){n.isDisable=!0,n.isCalculating=!0,n.t_first=n.t_start=bee.fromNow(),n.times=n.sum=0,n.targets=[e];var r=function(){var e=bee.fromNow();if(n.t_start<=n.t_first+n.calcDuration){if(e>n.t_start){var i=1e3/(e-n.t_start);n.sum+=i>60?60:i,n.times++}t(r)}else n.t_start<=n.t_first+n.disableDuration?(n.isCalculating=!1,t(r)):(n.times>0&&bee.addVar("fps",n.targets.join(";")+","+n.t_first+","+parseInt(n.sum/n.times)),n.pm&&bee.addVar("mem",parseInt(n.pm.usedJSHeapSize/1024/1024)),n.isCalculating=!1,n.isDisable=!1);n.t_start=e};t(r)}},onclick:function(e){n.calcFPS(e.target.nodeName.toUpperCase())},domLoad:function(){n.calcFPS("dom")},clear:function(e){}};bee.plugins.fps={init:function(e){n=bee.utils.merge(n,e),n.isDisable||n.initialized||(bee.subscribe("click",n.onclick,null,n),bee.subscribe("dom_loaded",n.domLoad,null,n),n.initialized=!0,n.complete=!0)},completed:function(){return n.complete}}}(bee.window),function(e){var t={initialized:!1,complete:!1,logs:{},errors:{},isDisable:!0,initPlugin:function(e,t){for(var n=0,r=t.length;r>n;n++)bee.addError(t[n].a[0],t[n].a[1],t[n].t);for(var n=0,r=e.length;r>n;n++)bee.log(e[n].a[0],e[n].a[1]||"i",e[n].t)},done:function(){t.complete=!0},clear:function(e){}};bee.plugins.log={init:function(e,n){return t=bee.utils.merge(t,e),t.isDisable||t.initialized?void 0:(bee.addError=function(e,n,r){var i={p:n,m:e.name?e.name+": "+(e.description||e.message):e.message||e.description,f:e.filename||e.fileName||e.sourceURL||"",l:e.lineno||e.lineNumber||e.line||0,c:e.colno||e.columnNumber||0,s:e.stack||e.stacktrace||""},a=i.p+":"+i.f+":"+i.l+":"+i.m;return t.errors[a]?void 0:(t.errors[a]=1,void bee.addVar("err","["+(r||bee.fromNow())+"]"+JSON.stringify(i)))},bee.log=function(e,n,r){n=["i","w","e"].indexOf(n)>-1?n:"i",t.logs[n]=t.logs[n]||{},t.logs[n][e]||(t.logs[n][e]=1,bee.addVar("log","["+n+":"+(r||bee.fromNow())+"]"+e))},t.initPlugin(n.logs,n.errors),bee.subscribe("page_ready",t.done,null,t),t.initialized=!0,this)},completed:function(){return t.complete}}}(bee.window),function(e){var t=e.document,n={initialized:!1,complete:!1,sended:!1,cookie:"rt",cookie_exp:600,strict_referrer:!0,navigationType:0,navigationStart:void 0,responseStart:void 0,firstPaintTime:void 0,t_start:void 0,t_fb_approx:void 0,r:void 0,isDisable:!1,unload:function(e){n.updateCookie({r:t.URL},"beforeunload"===e?"ul":"hd")},clickHandler:function(e,t,r,i){if(r){for(;r&&r.nodeName.toUpperCase()!==t;)r=r.parentNode;if(r&&r.nodeName.toUpperCase()===t){var a=i(r);n.updateCookie({nu:a},"cl")}}},onclick:function(e){n.clickHandler("Click","A",e.target,function(e){return e.href})},onsubmit:function(e){n.clickHandler("Submit","FORM",e.target,function(e){var n=e.getAttribute("action")||t.URL||"";return n.match(/\?/)?n:n+"?"})},trimTiming:function(e,t){var n=Math.round(e?e:0),r=Math.round(t?t:0);return n=0===n?0:n-r,n?n:""},initPlugin:function(){n.r=n.hashQueryString(t.referrer,!0),n.initFromCookie(),n.complete=!1,bee.subscribe("page_unload",n.unload,null,n),bee.subscribe("click",n.onclick,null,n),bee.subscribe("form_submit",n.onsubmit,null,n),bee.subscribe("onbeacon",n.clear,null,n),bee.subscribe("page_ready",bee.plugins.rt.done,null,n)},hashQueryString:function(e,t){return e?e.match?(e.match(/^\/\//)&&(e=location.protocol+e),e.match(/^(https?|file):/)?(t&&(e=e.replace(/#.*/,"")),e.replace(/\?([^#]*)/,function(e,t){return"?"+t})):""):"":e},updateCookie:function(e,t){if(!n.cookie)return!1;var r=bee.utils.getSubCookies(bee.utils.getCookie(n.cookie))||{};if("object"==typeof e)for(var i in e)e.hasOwnProperty(i)&&(void 0===e[i]?r.hasOwnProperty(i)&&delete r[i]:(("nu"===i||"r"===i)&&(e[i]=n.hashQueryString(e[i],!0)),r[i]=e[i]));var a=bee.now();if(t&&(r[t]=a),!bee.utils.setCookie(n.cookie,r,n.cookie_exp))return!1;var o=bee.now();return o-a>50&&bee.utils.removeCookie(n.cookie),!0},initFromCookie:function(){var e=bee.utils.getSubCookies(bee.utils.getCookie(n.cookie));if(e){if(e.s=Math.max(+e.ul||0,+e.cl||0),e.s&&(e.r||e.nu)){var r=n.hashQueryString(t.URL,!0);!n.strict_referrer||e.nu&&e.nu===r&&e.s<+e.cl+15||e.s===+e.ul&&n.r===e.r?(bee.plugins.rt.cookie_start=n.t_start=e.s,+e.hd>e.s&&(n.t_fb_approx=parseInt(e.hd,10))):n.t_start=n.t_fb_approx=void 0}n.updateCookie({s:void 0,r:void 0,nu:void 0,ul:void 0,cl:void 0,hd:void 0})}},initFromNavTiming:function(){var t,r,i=e.performance||e.msPerformance||e.webkitPerformance||e.mozPerformance;if(i&&i.timing){t=i.timing;var a=n.trimTiming(t.navigationStart,0),o=[i.navigation?i.navigation.type:-1,a,n.trimTiming(t.responseEnd,a),n.trimTiming(t.responseStart,a),n.trimTiming(t.requestStart,a),n.trimTiming(t.connectEnd,a),n.trimTiming(t.secureConnectionStart,a),n.trimTiming(t.connectStart,a),n.trimTiming(t.domainLookupEnd,a),n.trimTiming(t.domainLookupStart,a),n.trimTiming(t.redirectEnd,a),n.trimTiming(t.redirectStart,a)].join(",").replace(/,+$/,"");bee.addVar("pf",o),r="na",t.msFirstPaint&&(n.firstPaintTime=n.trimTiming(t.msFirstPaint,a))}else e.chrome&&e.chrome.csi&&e.chrome.csi().startE?(t={navigationStart:e.chrome.csi().startE},r="cs"):e.gtbExternal&&e.gtbExternal.startE()&&(t={navigationStart:e.gtbExternal.startE()},r="gt");if(t&&(n.navigationStart=t.navigationStart||t.fetchStart||void 0,n.responseStart=t.responseStart||void 0,navigator.userAgent.match(/Firefox\/[78]\./)&&(n.navigationStart=t.unloadEventStart||t.fetchStart||void 0)),e.chrome&&e.chrome.loadTimes){var s=e.chrome.loadTimes();s&&(n.firstPaintTime=n.trimTiming(1e3*s.firstPaintTime,a))}return r},validateLoadTimestamp:function(t){var n=t;return e.performance&&e.performance.timing&&e.performance.timing.loadEventStart&&(n=e.performance.timing.loadEventStart),n},setPageLoadTimers:function(e){var t,r,i=[];i[0]=n.initFromNavTiming(),i[0]||(n.t_start&&2!==n.navigationType?i[0]="co":i[0]="nu"),n.responseStart?t=n.responseStart:n.t_fb_approx&&(t=n.t_fb_approx),n.firstPaintTime&&(r=n.firstPaintTime),t&&(i.push(e-t),i.push(bee.domLoaded-t),i.push(t-(n.navigationStart||n.t_start))),r&&i.push(r),i.length>1&&bee.addVar("rt",i.join(",").replace(/,+$/,""))},clear:function(e){}};bee.plugins.rt={init:function(r){t=e.document,n=bee.utils.merge(n,r),n.isDisable||n.initialized||(n.initPlugin(),n.initialized=!0)},cookie_start:void 0,done:function(e){e=n.validateLoadTimestamp(e),n.setPageLoadTimers(e),n.complete=!0,bee.sendBeacon()},completed:function(){return n.complete}}}(bee.window),function(e){var t=e.document,n={complete:!1,hots:!1,honey:!0,handleEvent:function(e){var t=e.target,r=e.touches?e.touches[0]:e,i=t.getAttribute("bee-honey")||"";if(n.honey&&i&&n.sendData(n.queryToJson(i)),n.hots){var a=Math.round(r.pageX),o=Math.round(r.pageY);bee.addVar("hots",a+","+o)}},sendData:function(e){var t=Object.keys(e),n="";for(var r in t)n+=e[t[r]]+"|";var i=bee.uploadURL+"honey="+n.substring(0,n.length-1),a=new Image;a.src=i,a.remove()},ready:function(){var e=n.getDocumentSize();bee.addVar("device",e.width+","+e.height),bee.plugins.clicks.done()},getDocumentSize:function(){return{height:Math.max(t.body.scrollHeight,t.documentElement.scrollHeight,t.body.offsetHeight,t.documentElement.offsetHeight,t.body.clientHeight,t.documentElement.clientHeight),width:Math.max(t.body.scrollWidth,t.documentElement.scrollWidth,t.body.offsetWidth,t.documentElement.offsetWidth,t.body.clientWidth,t.documentElement.clientWidth)}},queryToJson:function(e){if(""==e)return{};for(var t=e.split("&"),n={},r=0,i=t.length;i>r;r++){var a=t[r].split("="),o=a[0],s=a.length<2?"":a[1];n[o]=s}return n}};bee.plugins.clicks={init:function(e){n=bee.utils.merge(n,e),bee.subscribe("click",n.handleEvent,null,n),bee.subscribe("page_ready",n.ready,null,n)},done:function(){n.complete=!0},completed:function(){return n.complete}}}(bee.window),function(e){e.bee.init(bee.utils.merge({uploadURL:"//e.weibo.com/v1/public/interface/log/lc"},window.Beeconfig||{}))}(window);